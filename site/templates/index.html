<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title> Wasp Remote Control </title>
        <link rel="stylesheet" href="/static/css/jquery.mobile-1.1.0.min.css" />
        <link rel="stylesheet" href="my.css" />
        <style>
            div.mute-ctrl .ui-slider-switch { 
                width: 9em 
            }
        </style>
        <script src="/static/js/jquery-1.7.1.min.js"> </script>
        <script src="/static/js/jquery.mobile-1.1.0.min.js"> </script>
    </head>
    <body>
        <div data-role="page" id="index">
            <div data-theme="d" data-role="header" data-position="fixed">
                <h3> Wasp </h3>
                <div data-role="navbar" data-iconpos="top">
                    <ul>
                        <li>
                            <a href="/index" data-theme="b" data-icon="gear" data-ajax="false" class="ui-btn-active"> Control </a>
                        </li>
                        <li>
                            <a href="/listing" data-theme="b" data-icon="search" data-ajax="false"> Browse Media </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div data-role="content">
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="slider1"> Volume </label>
                        <input type="range" name="volumeSlider" id="volume" value="100" min="0" max="100" step="10" data-highlight="false" />
                    </fieldset>
                </div>
                <div data-role="fieldcontain" class="mute-ctrl">
                    <fieldset data-role="controlgroup">
                        <label for="mute">Mute volume</label>
                        <input type="checkbox" id="mute" name="mute" /> 
                    </fieldset>
                </div>
                <input id="testmovie" type="button" data-icon="arrow-u" value="Test movie"/>
                <input id="pause" type="button" data-icon="arrow-r" value="Pause/unpause"/>
                <input id="stop" type="button" data-icon="delete" value="Stop playback"/>
                <input id="status" type="button" data-icon="delete" value="Check status"/>
            </div>
        </div>
        <script>
            function resetToDefaults() {
                $("input#volume").val(100).slider("refresh");
                $("input#mute").attr("checked", false).checkboxradio("refresh");
            }

            // All jQueryMobile (slightly registered differently than normal jQuery) events
            // (Ajax calls) are coming here.
            $(document).bind("pageinit", function(event, ui) {

                $("input#volume").bind("change", function(event, ui) {
                    var volume = $(this).val()
                    var request = $.ajax({
                        type: "POST",
                        url: "/volume",
                        data: { 
                            volume: volume, 
                        },
                    });
                });

                $("input#testmovie").bind("click", function(event, ui) {
                    var request = $.ajax({
                        type: "POST",
                        url: "/test",
                    });

                });

                $("input#pause").bind("click", function(event, ui) {
                    var request = $.ajax({
                        type: "POST",
                        url: "/pause",
                    });

                });

                $("input#stop").bind("click", function(event, ui) {
                    var request = $.ajax({
                        type: "POST",
                        url: "/stop",
                    });
                    
                    resetToDefaults();
                });

                $("input#status").bind("click", function(event, ui) {
                    var request = $.ajax({
                        type: "POST",
                        url: "/status",
                    });

                });

                $("input#mute").bind("change", function(event, ui) {
                    var value = $(this).is(":checked");
                    var request = $.ajax({
                        type: "POST",
                        url: "/mute",
                        data: {
                            mute : value,
                        }
                    });
                });
            });
        </script>
    </body>
</html>
